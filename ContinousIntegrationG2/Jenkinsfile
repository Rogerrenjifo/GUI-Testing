pipeline {
  agent any
  environment {
    PYTHONPATH = "${WORKSPACE}\\"
    PASSWORD="mcp123!"
    USER="celeste.palet"
    BROWSER="remote_chrome"
    DEVICE="pc"
    DRIVER_PATH=".\\"
    IMPLICIT_TIMEOUT="25"
    CI_EXECUTION="True"
  }
  stages{
    stage('Instalar dependencias') {
      steps {
        script {
          virtualenvDir = "${WORKSPACE}\\venv"  // Directorio del entorno virtual
          bat "python -m venv ${virtualenvDir}"  // Crear el entorno virtual
          bat ".\\venv\\Scripts\\activate"
          bat "${virtualenvDir}\\Scripts\\pip install -r ${WORKSPACE}\\requeriments.txt"  // Instalar las dependencias en el entorno virtual
        }
      }
    }
    stage('Test'){
      steps{
        bat '.\\venv\\Scripts\\robot  --outputdir .\\Blueprint\\Reports -i TAB_ELEMENTS .\\Blueprint\\TestCases'
      }
    }
  }
}
